{"version":3,"file":"index.js","sources":["../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport {\n  RegisteredRoutesInfo,\n  RegisteredRouter,\n  RouterStore,\n  last,\n  warning,\n  RouterOptions,\n  RouteMatch,\n  MatchRouteOptions,\n  AnyRoutesInfo,\n  DefaultRoutesInfo,\n  functionalUpdate,\n  RoutesInfo,\n  ValidFromPath,\n  LinkOptions,\n  RouteByPath,\n  ResolveRelativePath,\n  NoInfer,\n  ToOptions,\n  invariant,\n  Router,\n  AnyRootRoute,\n  RootRoute,\n  AnyRouteMatch,\n  NavigateOptions,\n  RouterConstructorOptions,\n} from '@tanstack/router'\nimport { useStore } from '@tanstack/react-store'\n\n//\n\nexport * from '@tanstack/router'\n\nexport { useStore }\n\n//\n\ntype ReactNode = any\n\nexport type SyncRouteComponent<TProps = {}> = (props: TProps) => ReactNode\n\nexport type RouteComponent<TProps = {}> = SyncRouteComponent<TProps> & {\n  preload?: () => Promise<void>\n}\n\nexport function lazy(\n  importer: () => Promise<{ default: SyncRouteComponent }>,\n): RouteComponent {\n  const lazyComp = React.lazy(importer as any)\n  let preloaded: Promise<SyncRouteComponent>\n\n  const finalComp = lazyComp as unknown as RouteComponent\n\n  finalComp.preload = async () => {\n    if (!preloaded) {\n      await importer()\n    }\n  }\n\n  return finalComp\n}\n\nexport type LinkPropsOptions<\n  TFrom extends RegisteredRoutesInfo['routePaths'] = '/',\n  TTo extends string = '',\n> = LinkOptions<RegisteredRoutesInfo, TFrom, TTo> & {\n  // A function that returns additional props for the `active` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n  activeProps?:\n    | React.AnchorHTMLAttributes<HTMLAnchorElement>\n    | (() => React.AnchorHTMLAttributes<HTMLAnchorElement>)\n  // A function that returns additional props for the `inactive` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n  inactiveProps?:\n    | React.AnchorHTMLAttributes<HTMLAnchorElement>\n    | (() => React.AnchorHTMLAttributes<HTMLAnchorElement>)\n}\n\nexport type MakeUseMatchRouteOptions<\n  TFrom extends RegisteredRoutesInfo['routePaths'] = '/',\n  TTo extends string = '',\n> = ToOptions<RegisteredRoutesInfo, TFrom, TTo> & MatchRouteOptions\n\nexport type MakeMatchRouteOptions<\n  TFrom extends RegisteredRoutesInfo['routePaths'] = '/',\n  TTo extends string = '',\n> = ToOptions<RegisteredRoutesInfo, TFrom, TTo> &\n  MatchRouteOptions & {\n    // If a function is passed as a child, it will be given the `isActive` boolean to aid in further styling on the element it returns\n    children?:\n      | ReactNode\n      | ((\n          params: RouteByPath<\n            RegisteredRoutesInfo,\n            ResolveRelativePath<TFrom, NoInfer<TTo>>\n          >['__types']['allParams'],\n        ) => ReactNode)\n  }\n\nexport type MakeLinkPropsOptions<\n  TFrom extends ValidFromPath<RegisteredRoutesInfo> = '/',\n  TTo extends string = '',\n> = LinkPropsOptions<TFrom, TTo> & React.AnchorHTMLAttributes<HTMLAnchorElement>\n\nexport type MakeLinkOptions<\n  TFrom extends RegisteredRoutesInfo['routePaths'] = '/',\n  TTo extends string = '',\n> = LinkPropsOptions<TFrom, TTo> &\n  React.AnchorHTMLAttributes<HTMLAnchorElement> &\n  Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'children'> & {\n    // If a function is passed as a child, it will be given the `isActive` boolean to aid in further styling on the element it returns\n    children?: ReactNode | ((state: { isActive: boolean }) => ReactNode)\n  }\n\ndeclare module '@tanstack/router' {\n  interface FrameworkGenerics {\n    Component: RouteComponent\n    ErrorComponent: RouteComponent<{\n      error: Error\n      info: { componentStack: string }\n    }>\n  }\n\n  interface RouterOptions<TRouteTree> {\n    // ssrFooter?: () => JSX.Element | Node\n  }\n\n  interface FrameworkRouteOptions {\n    wrapInSuspense?: boolean\n  }\n}\n\nexport type PromptProps = {\n  message: string\n  condition?: boolean | any\n  children?: ReactNode\n}\n\n//\n\nexport function useLinkProps<\n  TFrom extends ValidFromPath<RegisteredRoutesInfo> = '/',\n  TTo extends string = '',\n>(\n  options: MakeLinkPropsOptions<TFrom, TTo>,\n): React.AnchorHTMLAttributes<HTMLAnchorElement> {\n  const router = useRouterContext()\n\n  const {\n    // custom props\n    type,\n    children,\n    target,\n    activeProps = () => ({ className: 'active' }),\n    inactiveProps = () => ({}),\n    activeOptions,\n    disabled,\n    // fromCurrent,\n    hash,\n    search,\n    params,\n    to = '.',\n    preload,\n    preloadDelay,\n    replace,\n    // element props\n    style,\n    className,\n    onClick,\n    onFocus,\n    onMouseEnter,\n    onMouseLeave,\n    onTouchStart,\n    ...rest\n  } = options\n\n  const linkInfo = router.buildLink(options as any)\n\n  if (linkInfo.type === 'external') {\n    const { href } = linkInfo\n    return { href }\n  }\n\n  const {\n    handleClick,\n    handleFocus,\n    handleEnter,\n    handleLeave,\n    handleTouchStart,\n    isActive,\n    next,\n  } = linkInfo\n\n  const reactHandleClick = (e: Event) => {\n    if (React.startTransition) {\n      // This is a hack for react < 18\n      React.startTransition(() => {\n        handleClick(e)\n      })\n    } else {\n      handleClick(e)\n    }\n  }\n\n  const composeHandlers =\n    (handlers: (undefined | ((e: any) => void))[]) =>\n    (e: React.SyntheticEvent) => {\n      if (e.persist) e.persist()\n      handlers.filter(Boolean).forEach((handler) => {\n        if (e.defaultPrevented) return\n        handler!(e)\n      })\n    }\n\n  // Get the active props\n  const resolvedActiveProps: React.HTMLAttributes<HTMLAnchorElement> = isActive\n    ? functionalUpdate(activeProps as any, {}) ?? {}\n    : {}\n\n  // Get the inactive props\n  const resolvedInactiveProps: React.HTMLAttributes<HTMLAnchorElement> =\n    isActive ? {} : functionalUpdate(inactiveProps, {}) ?? {}\n\n  return {\n    ...resolvedActiveProps,\n    ...resolvedInactiveProps,\n    ...rest,\n    href: disabled ? undefined : next.href,\n    onClick: composeHandlers([onClick, reactHandleClick]),\n    onFocus: composeHandlers([onFocus, handleFocus]),\n    onMouseEnter: composeHandlers([onMouseEnter, handleEnter]),\n    onMouseLeave: composeHandlers([onMouseLeave, handleLeave]),\n    onTouchStart: composeHandlers([onTouchStart, handleTouchStart]),\n    target,\n    style: {\n      ...style,\n      ...resolvedActiveProps.style,\n      ...resolvedInactiveProps.style,\n    },\n    className:\n      [\n        className,\n        resolvedActiveProps.className,\n        resolvedInactiveProps.className,\n      ]\n        .filter(Boolean)\n        .join(' ') || undefined,\n    ...(disabled\n      ? {\n          role: 'link',\n          'aria-disabled': true,\n        }\n      : undefined),\n    ['data-status']: isActive ? 'active' : undefined,\n  }\n}\n\nexport interface LinkFn<\n  TDefaultFrom extends RegisteredRoutesInfo['routePaths'] = '/',\n  TDefaultTo extends string = '',\n> {\n  <\n    TFrom extends RegisteredRoutesInfo['routePaths'] = TDefaultFrom,\n    TTo extends string = TDefaultTo,\n  >(\n    props: MakeLinkOptions<TFrom, TTo> & React.RefAttributes<HTMLAnchorElement>,\n  ): ReactNode\n}\n\nexport const Link: LinkFn = React.forwardRef((props: any, ref) => {\n  const linkProps = useLinkProps(props)\n\n  return (\n    <a\n      {...{\n        ref: ref as any,\n        ...linkProps,\n        children:\n          typeof props.children === 'function'\n            ? props.children({\n                isActive: (linkProps as any)['data-status'] === 'active',\n              })\n            : props.children,\n      }}\n    />\n  )\n}) as any\n\nexport function Navigate<\n  TFrom extends RegisteredRoutesInfo['routePaths'] = '/',\n  TTo extends string = '',\n>(props: NavigateOptions<RegisteredRoutesInfo, TFrom, TTo>): null {\n  const router = useRouterContext()\n\n  React.useLayoutEffect(() => {\n    router.navigate(props as any)\n  }, [])\n\n  return null\n}\n\ntype MatchesContextValue = AnyRouteMatch[]\n\nexport const matchesContext = React.createContext<MatchesContextValue>(null!)\nexport const routerContext = React.createContext<{ router: RegisteredRouter }>(\n  null!,\n)\n\nexport type MatchesProviderProps = {\n  value: MatchesContextValue\n  children: ReactNode\n}\n\nexport class ReactRouter<\n  TRouteConfig extends AnyRootRoute = RootRoute,\n  TRoutesInfo extends AnyRoutesInfo = RoutesInfo<TRouteConfig>,\n> extends Router<TRouteConfig, TRoutesInfo> {\n  constructor(opts: RouterConstructorOptions<TRouteConfig>) {\n    super({\n      ...opts,\n      loadComponent: async (component) => {\n        if (component.preload) {\n          await component.preload()\n        }\n\n        return component as any\n      },\n    })\n  }\n}\n\nexport type RouterProps<\n  TRouteConfig extends AnyRootRoute = RootRoute,\n  TRoutesInfo extends AnyRoutesInfo = DefaultRoutesInfo,\n> = RouterOptions<TRouteConfig> & {\n  router: Router<TRouteConfig, TRoutesInfo>\n}\n\nexport function RouterProvider<\n  TRouteConfig extends AnyRootRoute = RootRoute,\n  TRoutesInfo extends AnyRoutesInfo = DefaultRoutesInfo,\n>({ router, ...rest }: RouterProps<TRouteConfig, TRoutesInfo>) {\n  router.update(rest)\n\n  const currentMatches = useStore(router.__store, (s) => s.currentMatches)\n\n  React.useEffect(router.mount, [router])\n\n  return (\n    <routerContext.Provider value={{ router: router as any }}>\n      <matchesContext.Provider value={[undefined!, ...currentMatches]}>\n        <CatchBoundary\n          errorComponent={ErrorComponent}\n          onCatch={() => {\n            warning(\n              false,\n              `Error in router! Consider setting an 'errorComponent' in your RootRoute! ðŸ‘`,\n            )\n          }}\n        >\n          <Outlet />\n        </CatchBoundary>\n      </matchesContext.Provider>\n    </routerContext.Provider>\n  )\n}\n\nexport function useRouterContext(): RegisteredRouter {\n  const value = React.useContext(routerContext)\n  warning(value, 'useRouter must be used inside a <Router> component!')\n\n  useStore(value.router.__store)\n\n  return value.router\n}\n\nexport function useRouter<T = RouterStore>(\n  track?: (state: Router['__store']) => T,\n  shallow?: boolean,\n): RegisteredRouter {\n  const router = useRouterContext()\n  useStore(router.__store, track as any, shallow)\n  return router\n}\n\nexport function useMatches(): RouteMatch[] {\n  return React.useContext(matchesContext)\n}\n\nexport function useMatch<\n  TFrom extends keyof RegisteredRoutesInfo['routesById'],\n  TStrict extends boolean = true,\n  TRouteMatch = RouteMatch<\n    RegisteredRoutesInfo,\n    RegisteredRoutesInfo['routesById'][TFrom]\n  >,\n>(opts?: {\n  from: TFrom\n  strict?: TStrict\n  track?: (match: TRouteMatch) => any\n  shallow?: boolean\n}): TStrict extends true ? TRouteMatch : TRouteMatch | undefined {\n  const router = useRouterContext()\n  const nearestMatch = useMatches()[0]!\n  const match = opts?.from\n    ? router.state.currentMatches.find((d) => d.route.id === opts?.from)\n    : nearestMatch\n\n  invariant(\n    match,\n    `Could not find ${\n      opts?.from ? `an active match from \"${opts.from}\"` : 'a nearest match!'\n    }`,\n  )\n\n  if (opts?.strict ?? true) {\n    invariant(\n      nearestMatch.route.id == match?.route.id,\n      `useMatch(\"${\n        match?.route.id as string\n      }\") is being called in a component that is meant to render the '${\n        nearestMatch.route.id\n      }' route. Did you mean to 'useMatch(\"${\n        match?.route.id as string\n      }\", { strict: false })' or 'useRoute(\"${\n        match?.route.id as string\n      }\")' instead?`,\n    )\n  }\n\n  useStore(\n    match!.__store as any,\n    (d) => opts?.track?.(match as any) ?? match,\n    opts?.shallow,\n  )\n\n  return match as any\n}\n\nexport function useRoute<\n  TId extends keyof RegisteredRoutesInfo['routesById'] = '/',\n>(routeId: TId): RegisteredRoutesInfo['routesById'][TId] {\n  const router = useRouterContext()\n  const resolvedRoute = router.getRoute(routeId as any)\n\n  invariant(\n    resolvedRoute,\n    `Could not find a route for route \"${\n      routeId as string\n    }\"! Did you forget to add it to your route?`,\n  )\n\n  return resolvedRoute as any\n}\n\nexport function useSearch<\n  TFrom extends keyof RegisteredRoutesInfo['routesById'],\n  TStrict extends boolean = true,\n  TSearch = RegisteredRoutesInfo['routesById'][TFrom]['__types']['fullSearchSchema'],\n  TSelected = TSearch,\n>(opts?: {\n  from: TFrom\n  strict?: TStrict\n  track?: (search: TSearch) => TSelected\n}): TStrict extends true ? TSelected : TSelected | undefined {\n  const { track, ...matchOpts } = opts as any\n  const match = useMatch(matchOpts)\n  useStore(match.__store, (d: any) => opts?.track?.(d.search) ?? d.search, true)\n\n  return (match as unknown as RouteMatch).state.search as any\n}\n\nexport function useParams<\n  TFrom extends keyof RegisteredRoutesInfo['routesById'] = '/',\n  TDefaultSelected = RegisteredRoutesInfo['allParams'] &\n    RegisteredRoutesInfo['routesById'][TFrom]['__types']['allParams'],\n  TSelected = TDefaultSelected,\n>(opts?: {\n  from: TFrom\n  track?: (search: TDefaultSelected) => TSelected\n}): TSelected {\n  const router = useRouterContext()\n  useStore(\n    router.__store,\n    (d) => {\n      const params = last(d.currentMatches)?.params as any\n      return opts?.track?.(params) ?? params\n    },\n    true,\n  )\n\n  return last(router.state.currentMatches)?.params as any\n}\n\nexport function useNavigate<\n  TDefaultFrom extends keyof RegisteredRoutesInfo['routesById'] = '/',\n>(defaultOpts?: { from?: TDefaultFrom }) {\n  const router = useRouterContext()\n  return React.useCallback(\n    <\n      TFrom extends keyof RegisteredRoutesInfo['routesById'] = TDefaultFrom,\n      TTo extends string = '',\n    >(\n      opts?: MakeLinkOptions<TFrom, TTo>,\n    ) => {\n      return router.navigate({ ...defaultOpts, ...(opts as any) })\n    },\n    [],\n  )\n}\n\nexport function useMatchRoute() {\n  const router = useRouterContext()\n\n  return React.useCallback(\n    <\n      TFrom extends ValidFromPath<RegisteredRoutesInfo> = '/',\n      TTo extends string = '',\n    >(\n      opts: MakeUseMatchRouteOptions<TFrom, TTo>,\n    ) => {\n      const { pending, caseSensitive, ...rest } = opts\n\n      return router.matchRoute(rest as any, {\n        pending,\n        caseSensitive,\n      })\n    },\n    [],\n  )\n}\n\nexport function MatchRoute<\n  TFrom extends ValidFromPath<RegisteredRoutesInfo> = '/',\n  TTo extends string = '',\n>(props: MakeMatchRouteOptions<TFrom, TTo>): any {\n  const matchRoute = useMatchRoute()\n  const params = matchRoute(props)\n\n  if (!params) {\n    return null\n  }\n\n  if (typeof props.children === 'function') {\n    return (props.children as any)(params)\n  }\n\n  return params ? props.children : null\n}\n\nexport function Outlet() {\n  const matches = useMatches().slice(1)\n  const match = matches[0]\n\n  if (!match) {\n    return null\n  }\n\n  return <SubOutlet matches={matches} match={match} />\n}\n\nfunction SubOutlet({\n  matches,\n  match,\n}: {\n  matches: RouteMatch[]\n  match: RouteMatch\n}) {\n  const router = useRouterContext()\n  useStore(match!.__store, (store) => [store.status, store.error], true)\n\n  const defaultPending = React.useCallback(() => null, [])\n\n  const PendingComponent = (match.pendingComponent ??\n    router.options.defaultPendingComponent ??\n    defaultPending) as any\n\n  const errorComponent =\n    match.errorComponent ?? router.options.defaultErrorComponent\n\n  const ResolvedSuspenseBoundary =\n    match.route.options.wrapInSuspense ?? true ? React.Suspense : SafeFragment\n  const ResolvedCatchBoundary = errorComponent ? CatchBoundary : SafeFragment\n\n  return (\n    <matchesContext.Provider value={matches}>\n      <ResolvedSuspenseBoundary fallback={<PendingComponent />}>\n        <ResolvedCatchBoundary\n          key={match.route.id}\n          errorComponent={errorComponent}\n          onCatch={() => {\n            warning(false, `Error in route match: ${match.id}`)\n          }}\n        >\n          <Inner match={match} />\n        </ResolvedCatchBoundary>\n      </ResolvedSuspenseBoundary>\n    </matchesContext.Provider>\n  )\n}\n\nfunction Inner(props: { match: RouteMatch }): any {\n  const router = useRouterContext()\n\n  if (props.match.state.status === 'error') {\n    throw props.match.state.error\n  }\n\n  if (props.match.state.status === 'success') {\n    return React.createElement(\n      (props.match.component as any) ??\n        router.options.defaultComponent ??\n        Outlet,\n    )\n  }\n\n  if (props.match.state.status === 'pending') {\n    throw props.match.__loadPromise\n  }\n\n  invariant(\n    false,\n    'Idle routeMatch status encountered during rendering! You should never see this. File an issue!',\n  )\n}\n\nfunction SafeFragment(props: any) {\n  return <>{props.children}</>\n}\n\n// This is the messiest thing ever... I'm either seriously tired (likely) or\n// there has to be a better way to reset error boundaries when the\n// router's location key changes.\n\nclass CatchBoundary extends React.Component<{\n  children: any\n  errorComponent: any\n  onCatch: (error: any, info: any) => void\n}> {\n  state = {\n    error: false,\n    info: undefined,\n  }\n  componentDidCatch(error: any, info: any) {\n    this.props.onCatch(error, info)\n    console.error(error)\n    this.setState({\n      error,\n      info,\n    })\n  }\n  render() {\n    return (\n      <CatchBoundaryInner\n        {...this.props}\n        errorState={this.state}\n        reset={() => this.setState({})}\n      />\n    )\n  }\n}\n\nfunction CatchBoundaryInner(props: {\n  children: any\n  errorComponent: any\n  errorState: { error: unknown; info: any }\n  reset: () => void\n}) {\n  const [activeErrorState, setActiveErrorState] = React.useState(\n    props.errorState,\n  )\n  const router = useRouterContext()\n  const errorComponent = props.errorComponent ?? ErrorComponent\n  const prevKeyRef = React.useRef('' as any)\n\n  React.useEffect(() => {\n    if (activeErrorState) {\n      if (router.state.currentLocation.key !== prevKeyRef.current) {\n        setActiveErrorState({} as any)\n      }\n    }\n\n    prevKeyRef.current = router.state.currentLocation.key\n  }, [activeErrorState, router.state.currentLocation.key])\n\n  React.useEffect(() => {\n    if (props.errorState.error) {\n      setActiveErrorState(props.errorState)\n    }\n    // props.reset()\n  }, [props.errorState.error])\n\n  if (props.errorState.error && activeErrorState.error) {\n    return React.createElement(errorComponent, activeErrorState)\n  }\n\n  return props.children\n}\n\nexport function ErrorComponent({ error }: { error: any }) {\n  return (\n    <div style={{ padding: '.5rem', maxWidth: '100%' }}>\n      <strong style={{ fontSize: '1.2rem' }}>Something went wrong!</strong>\n      <div style={{ height: '.5rem' }} />\n      <div>\n        <pre\n          style={{\n            fontSize: '.7em',\n            border: '1px solid red',\n            borderRadius: '.25rem',\n            padding: '.5rem',\n            color: 'red',\n            overflow: 'auto',\n          }}\n        >\n          {error.message ? <code>{error.message}</code> : null}\n        </pre>\n      </div>\n    </div>\n  )\n}\n\nexport function useBlocker(\n  message: string,\n  condition: boolean | any = true,\n): void {\n  const router = useRouter()\n\n  React.useEffect(() => {\n    if (!condition) return\n\n    let unblock = router.history.block((retry, cancel) => {\n      if (window.confirm(message)) {\n        unblock()\n        retry()\n      } else {\n        cancel()\n      }\n    })\n\n    return unblock\n  })\n}\n\nexport function Block({ message, condition, children }: PromptProps) {\n  useBlocker(message, condition)\n  return (children ?? null) as ReactNode\n}\n"],"names":["lazy","importer","lazyComp","React","finalComp","preload","useLinkProps","options","router","useRouterContext","type","children","target","activeProps","className","inactiveProps","activeOptions","disabled","hash","search","params","to","preloadDelay","replace","style","onClick","onFocus","onMouseEnter","onMouseLeave","onTouchStart","rest","linkInfo","buildLink","href","handleClick","handleFocus","handleEnter","handleLeave","handleTouchStart","isActive","next","reactHandleClick","e","startTransition","composeHandlers","handlers","persist","filter","Boolean","forEach","handler","defaultPrevented","resolvedActiveProps","functionalUpdate","resolvedInactiveProps","undefined","join","role","Link","forwardRef","props","ref","linkProps","_extends","Navigate","useLayoutEffect","navigate","matchesContext","createContext","routerContext","ReactRouter","Router","constructor","opts","loadComponent","component","RouterProvider","update","currentMatches","useStore","__store","s","useEffect","mount","ErrorComponent","warning","value","useContext","useRouter","track","shallow","useMatches","useMatch","nearestMatch","match","from","state","find","d","route","id","invariant","strict","useRoute","routeId","resolvedRoute","getRoute","useSearch","matchOpts","useParams","last","useNavigate","defaultOpts","useCallback","useMatchRoute","pending","caseSensitive","matchRoute","MatchRoute","Outlet","matches","slice","SubOutlet","store","status","error","defaultPending","PendingComponent","pendingComponent","defaultPendingComponent","errorComponent","defaultErrorComponent","ResolvedSuspenseBoundary","wrapInSuspense","Suspense","SafeFragment","ResolvedCatchBoundary","CatchBoundary","Inner","createElement","defaultComponent","__loadPromise","Component","info","componentDidCatch","onCatch","console","setState","render","CatchBoundaryInner","activeErrorState","setActiveErrorState","useState","errorState","prevKeyRef","useRef","currentLocation","key","current","padding","maxWidth","fontSize","height","border","borderRadius","color","overflow","message","useBlocker","condition","unblock","history","block","retry","cancel","window","confirm","Block"],"mappings":"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"}